<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
<!-- include aframe-ar.js -->
<script src="https://raw.githack.com/AR-js-org/AR.js/dev/aframe/build/aframe-ar.js"></script>
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
<script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v2.1.0/dist/aframe-physics-system.min.js"></script>
<script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>

<!DOCTYPE html>
<style>
	body {
		/* disable long press in iOS? */
		-webkit-touch-callout: none;
	}

	.mainUI {
		border: 0px solid pink;
		position: fixed;
		top: 0px;
		width: 99%;
		height: 99%;
		z-index: 1;
		pointer-events: none;
		/* allow click-through in transparent areas */
	}

	.regionUI {
		border: 0px solid yellow;
		position: absolute;
		display: flex;
		flex-direction: row;
		pointer-events: none;
	}

	.buttonUI {
		border: 0px solid lime;
		display: flex;
		flex-direction: column;
		justify-content: center;
		pointer-events: auto;
		filter: drop-shadow(0px 0px 20px white);
	}

	.skyColor {
		filter: hue-rotate(240deg) saturate(100%) brightness(100%) drop-shadow(0px 0px 20px white);
	}



	.menu {
		margin: 0 auto;
		display: flex;
		flex-flow: column wrap;
		width: 80rem;
		max-width: 100%;
		border-radius: 2rem;
		background: var(--menu-bg);
	}

	.btn-menu {
		position: relative;
		cursor: pointer;
		background: var(--menu-bg);
		border: none;
		padding: 2rem;
		color: var(--menu-font-color);
		font-weight: 700;
		border-top: 0.1rem solid var(--menu-border);
		border-bottom: 0.1rem solid var(--menu-border);
		transition: background 1s;
	}

	.btn-menu:hover {
		background: var(--menu-bg-hover);
	}

	.btn-menu:focus {
		outline: none;
		box-shadow: none;
	}

	.selected {
		background: var(--menu-bg-selected);
	}

	.selected::before {
		position: absolute;
		left: 0;
		top: 0;
		content: "";
		background: var(--menu-bg-selected-chevron);
		height: 5.6rem;
		width: 0.5rem;
	}
</style>

<head>

</head>

<body>

	<main>
		<canvas>

			<div class="menu">
				<button class="btn-menu selected">One</button>
				<button class="btn-menu">Two</button>
				<button class="btn-menu">Three</button>
				<button class="btn-menu">Four</button>
				<button class="btn-menu">Five</button>
			</div>
		</canvas>
	</main>

	<div class="mainUI" id="uiDiv" oncontextmenu="return false;">

		<!-- top-left -->
		<div class="regionUI skyColor" style="top: 10px; left: 10px;" oncontextmenu="return false;">
		</div>

		<!-- top-right -->
		<div class="regionUI" style="top: 10px; right: 10px;">
		</div>

		<!-- bottom-left -->
		<div class="regionUI" style="bottom: 10px; left: 10px;">
			<div class="buttonUI" style="width: 128px;  opacity:0.80;">
				<img src="assets/images/joystick-base.png" />
				<div id="stick1" style="position: absolute; left:32px; top:32px;">
					<img src="assets/images/joystick-red.png" />
				</div>
			</div>
		</div>

		<!-- bottom-right SECOND
		<div class="regionUI" style="bottom: 10px; right: 10px;">
			<div class="buttonUI" style="width: 128px; opacity:0.80;">
				<img src="assets/images/joystick-base.png" />
				<div id="stick2" style="position: absolute; left:32px; top:32px;">
					<img src="assets/images/joystick-blue.png" />
				</div>
			</div>
		</div>
		-->
	</div>

	<!--
		Components must be initialized before their use! Do not add them directly in <a-scene>, thats a bad practice
	-->
	<script src="./js/Components/modelRenderer.js"></script>
	<script src="./js/Components/mobileBody.js"></script>
	<script src="./js/Components/collider.js"></script>

	<script src="./js/Functions/Input/joystick.js"></script>



	<!--
		Initialize GameObjects here(complex components, which add other componentes to themselves)
	-->
	<script src="./js/GameObjects/player.js"></script>
	<script src="./js/GameObjects/building.js"></script>


	Cucha tiburao. Ya sabes mas o menos como montar una escena. Es una mierda porque no se pueden añadir objetos en
	runtime, asi que por ahora se mantiene una a-scene estatica y tirando. Mira si eso como cambiar la a-scene con src.
	Intenta avanzar un poco en las mecánicas que hay en el doc, y comprueba el github que no funciona muy bien ahora que
	digamos. No te olvides de hacer una rama nueva.

	<a-scene id="mainscene" embedded arjs='sourceType: webcam;'
		renderer='antialias: true; alpha: true; precision: medium;'>
		<a-entity joystick id="joystick"></a-entity>

		<a-marker preset="hiro" id="hiro">
			<a-entity player></a-entity>
			<a-entity building position="1 0 0.24" rotation="0 45 0"></a-entity>
			<a-entity building position="-0.5 0 1.4" rotation="0 89 0"></a-entity>
			<a-entity building position="1.4 0 1.5" rotation="0 32 0"></a-entity>

		</a-marker>

		<a-entity camera id="camera">
			<a-gui-cursor id="cursor" raycaster="objects: [interactable]" fuse="true" fuse-timeout="2000"
				color="#ECEFF1" hover-color="#CFD8DC" active-color="#607D8B" design="ring">
			</a-gui-cursor>
			<a-entity joystick></a-entity>
		</a-entity>

	</a-scene>

</body>

</html>